<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="_token" content="{{ csrf_token() }}">
    <meta name="robots" content="noindex, nofolllow, noarchive, noodp, NoImageIndex, noydir">
    <title>
        {% if subTitle %}
            {{ subTitle }} »
        {% endif %}
        {% if title != "Firefly III" %}
            {{ title }} »
        {% endif %}

        Firefly III

    </title>
    <base href="{{ route('index') }}/">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="lib/adminlte/css/AdminLTE.min.css" rel="stylesheet" type="text/css"/>
    <link href="lib/adminlte/css/skins/skin-blue-light.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/daterangepicker.css" rel="stylesheet" type="text/css"/>
    <link href="css/firefly.css" rel="stylesheet" type="text/css"/>
    <link href="css/bootstrap-tour.min.css" rel="stylesheet" type="text/css"/>

    {% block styles %}{% endblock %}
    <!--[if lt IE 9]>
    <script src="js/lib/html5shiv.min.js"></script>
    <script src="js/lib/respond.min.js"></script>
    <![endif]-->

    {# favicons #}
    {% include('partials.favicons') %}

</head>
<body class="skin-blue-light sidebar-mini hold-transition">
<div class="wrapper">

    <header class="main-header">

        <!-- Logo -->
        <a href="{{ route('index') }}" class="logo">
            <!-- mini logo for sidebar mini 50x50 pixels -->
            <span class="logo-mini">SW</span>
            <!-- logo for regular state and mobile devices -->
            <span class="logo-lg"><b>StudentWallet.</b></span>
        </a>

        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>
            <!-- Navbar Right Menu -->
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">

                    <li class="hidden-sm hidden-xs">
                        <a href="#" id="help" data-route="{{ Route.getCurrentRoute.getName }}">
                            <i class="fa fa-question-circle" data-route="{{ Route.getCurrentRoute.getName }}"></i>
                        </a>
                    </li>

                    <!-- Messages: style can be found in dropdown.less-->
                    <li>
                        <span style="color:#fff;padding: 15px;display: block;line-height: 20px;">
                            <span id="daterange"></span>
                        </span>
                    </li>

                    {% if not SANDSTORM %}
                        <li class="dropdown user user-menu">
                        <span style="cursor:default;color:#fff;padding: 15px;display: block;line-height: 20px;">
                            <span class="hidden-xs">{{ Auth.user.email }}</span>
                        </span>
                        </li>
                    {% endif %}
                    <li id="sidebar-toggle">
                        <a href="#" data-toggle="control-sidebar"><i class="fa fa-plus-circle"></i></a>
                    </li>
                </ul>
            </div>

        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            <!-- search form -->
            <form action="{{ route('search.index') }}" method="get" class="sidebar-form">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="{{ 'searchPlaceholder'|_ }}" value="{{ query }}"/>
                    <span class="input-group-btn">
                <button type='submit' name='search' id='search-btn' class="btn btn-flat"><i class="fa fa-search"></i></button>
              </span>
                </div>
            </form>
            <!-- /.search form -->
            <!-- sidebar menu: : style can be found in sidebar.less -->
            {% include('partials.menu-sidebar') %}
        </section>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            {% include('partials.page-header') %}
            {% block breadcrumbs %}{% endblock %}
        </section>

        <!-- Main content -->
        <section class="content">
            {% if IS_DEMO_SITE %}
                <div class="row no-print">
                    <div class="col-lg-12">
                        <p class="well">
                            {% include ['demo.' ~ Route.getCurrentRoute.getName, 'demo.no-demo-text'] %}
                        </p>
                    </div>
                </div>
            {% endif %}

            {% include('partials.flashes') %}

            <!-- actual content -->
            {% block content %}{% endblock %}
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <footer class="main-footer">
        <div class="pull-right hidden-xs">
            <b>Version</b> {{ Config.get('firefly.version') }}
        </div>
    </footer>

    {% include('partials.control-bar') %}

</div>
<!-- ./wrapper -->


<!-- Modal -->
<div class="modal fade" id="defaultModal" tabindex="-1" role="dialog">
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="helpModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="helpTitle">&nbsp;</h4>
            </div>
            <div class="modal-body" id="helpBody">&nbsp;</div>
            <div class="modal-footer">
                <small class="pull-left">
                    {{ 'need_more_help'|_ }}
                </small>
                <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'close'|_ }}</button>
            </div>
        </div>
    </div>
</div>

<script src="js/lib/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/lib/moment.min.js" type="text/javascript"></script>
<script src="js/lib/daterangepicker.js" type="text/javascript"></script>
<script src="lib/adminlte/js/app.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/lib/accounting.min.js"></script>
<script src="js/lib/bootstrap-tour.min.js" type="text/javascript"></script>
<script src="{{ route('javascript.variables') }}?ext=.js" type="text/javascript"></script>
<script type="text/javascript" src="js/ff/firefly.js"></script>
<script type="text/javascript" src="js/ff/help.js"></script>
{% block scripts %}{% endblock %}

{% if env('ANALYTICS_ID','') != '' %}
    <script>
        // send pageview
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', '{{ env('ANALYTICS_ID', 'XXX-XX-X') }}', {'siteSpeedSampleRate': 100});
        ga('send', 'pageview');

        // send an event if relevant:
        {% if Session.has('gaEventCategory') and Session.has('gaEventAction') and not Session.has('gaEventLabel') %}
        ga('send', 'event', '{{ Session.get('gaEventCategory') }}', '{{ Session.get('gaEventAction') }}');
        {% endif %}

        // send event if relevant:
        {% if Session.has('gaEventCategory') and Session.has('gaEventAction') and Session.has('gaEventLabel') %}
        ga('send', 'event', '{{ Session.get('gaEventCategory') }}', '{{ Session.get('gaEventAction') }}', '{{ Session.get('gaEventLabel') }}');
        {% endif %}
    </script>
{% endif %}

</body>
</html>
